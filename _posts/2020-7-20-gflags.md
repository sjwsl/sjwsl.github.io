---
# layout: post
title: gflags
categories: 
    - Usage
tag:
    - C++
    - Shell
---
Formerly Google Commandline Flags

<https://github.com/gflags/gflags>

- 定义参数

  ```c++
  DEFINE_int32(ai, 60, "alarm_interval");
  ```

  定义一个 -ai 参数，全名为 alarm_interval，默认值是 60。

  主函数第一行添加

  ```c++
  google::ParseCommandLineFlags(&argc, &argv, true);
  ```

  在命令行输入

  ```c++
  ./tools -ai 50
  ```

​  之后获取 FLAGS_ai 的值为 50

- 显示帮助信息

  ```c++
  google::ShowUsageWithFlagsRestrict(argv[0], "tools");
  ```

- 定义函数

  定义函数可以使一个 tools 实现多种功能。

  首先像之前一样添加参数

  ```c++
  DEFINE_string(f, "UNKNOW", "func");
  ```

  添加执行函数的宏定义

  ```c++
  #define DECLARE_FUNC(func, help)\		                 
  if (FLAGS_f == #func) {\
    func();\
    return 0;\
  }																
  ```

  如果已经定义了函数 `void Work()`

  就可以声明

  ```c++
  DECLARE_FUNC(Work, "-ai alarm_interval");
  ```

  在命令行输入

  ```c++
  ./tools -f Work -ai 50
  ```

  就可以执行 Work 函数，并且传入 FLAGS_ai = 50